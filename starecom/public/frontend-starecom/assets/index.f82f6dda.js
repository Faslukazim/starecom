import{c as y,r as w,a as D,b as $,d as j,u as A,i as I,e as N,f as S,o as _,g,h as c,j as l,w as h,k as u,_ as q,l as P,t as L,m as U,F as x,n as z,p as T,q as R,D as F,s as B,v as H,x as J,y as W,C as G,I as K,z as Y}from"./vendor.d2b082e7.js";const M=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function a(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(e){if(e.ep)return;e.ep=!0;const s=a(e);fetch(e.href,s)}};M();const Q="modulepreload",V={},X="/assets/starecom/frontend-starecom/",d=function(o,a){return!a||a.length===0?o():Promise.all(a.map(t=>{if(t=`${X}${t}`,t in V)return;V[t]=!0;const e=t.endsWith(".css"),s=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${s}`))return;const r=document.createElement("link");if(r.rel=e?"stylesheet":Q,e||(r.as="script",r.crossOrigin=""),r.href=t,document.head.appendChild(r),e)return new Promise((v,i)=>{r.addEventListener("load",v),r.addEventListener("error",i)})})).then(()=>o())},b=y({url:"frappe.auth.get_logged_user",cache:"User",onError(n){n&&n.exc_type==="AuthenticationError"&&f.push({name:"LoginPage"})}});function k(){let o=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return o==="Guest"&&(o=null),o}const p=w({login:y({url:"login",makeParams({email:n,password:o}){return{usr:n,pwd:o}},onSuccess(n){b.reload(),p.user=k(),p.login.reset(),f.replace(n.default_route||"/")}}),logout:y({url:"logout",onSuccess(){b.reset(),p.user=k(),f.replace({name:"Login"})}}),user:k(),isLoggedIn:D(()=>!!p.user)}),Z=[{path:"/",name:"Home",redirect:{name:"ProductsListPage"}},{path:"/products",name:"ProductsListPage",component:()=>d(()=>import("./Products.f2be6e39.js"),["assets/Products.f2be6e39.js","assets/vendor.d2b082e7.js","assets/vendor.2b3bdff3.css","assets/utils.e172e694.js"])},{path:"/products/:name",name:"ProductDetailsPage",component:()=>d(()=>import("./ProductDetails.67643a5f.js"),["assets/ProductDetails.67643a5f.js","assets/vendor.d2b082e7.js","assets/vendor.2b3bdff3.css","assets/utils.e172e694.js","assets/index.8baf7187.js","assets/index.b1290c36.css"])},{name:"Login",path:"/account/login",component:()=>d(()=>import("./Login.3eb4e89e.js"),["assets/Login.3eb4e89e.js","assets/vendor.d2b082e7.js","assets/vendor.2b3bdff3.css"])},{name:"CheckoutPage",path:"/checkout",component:()=>d(()=>import("./Checkout.01236f2b.js"),["assets/Checkout.01236f2b.js","assets/vendor.d2b082e7.js","assets/vendor.2b3bdff3.css","assets/index.8baf7187.js","assets/index.b1290c36.css"]),meta:{requiresLogin:!0}},{name:"RazorpayPage",path:"/razorpay",component:()=>d(()=>import("./Razorpay.50f2ca4e.js"),["assets/Razorpay.50f2ca4e.js","assets/vendor.d2b082e7.js","assets/vendor.2b3bdff3.css","assets/index.8baf7187.js","assets/index.b1290c36.css"])}];let f=$({history:j("/frontend-starecom"),routes:Z});f.beforeEach(async(n,o,a)=>{let t=p.isLoggedIn;try{await b.promise}catch{t=!1}n.name==="Login"&&t?a({name:"Home"}):n.name!=="Login"&&!t?a({name:"Login"}):a()});const ee={class:"fixed top-0 bg-white-overlay-900 z-50 p-4 items-center w-full shadow-sm"},te={class:"flex justify-between"},oe=c("h1",{class:"text-2xl font-bold text-green-500"},"Store",-1),se=c("a",{href:"",class:"text-sm font-medium font-sans text-gray-800 hover:text-blue-400"},"Home",-1),re=c("a",{href:"",class:"text-sm font-medium font-sans text-gray-800 hover:text-blue-400"},"Products",-1),ne=c("a",{href:"",class:"text-sm font-medium font-sans text-gray-800 hover:text-blue-400"},"Orders",-1),ae=c("a",{href:"",class:"text-sm font-medium font-sans text-gray-800 hover:text-blue-400"},"Account & List",-1),ce={__name:"Navbar",setup(n){const o=A(),a=I("cart"),t=N(!1);function e(s){a.items.splice(s,1)}return(s,r)=>{const v=S("router-link");return _(),g(x,null,[c("div",null,[c("nav",ee,[c("div",te,[l(v,{to:{name:"ProductsListPage"}},{default:h(()=>[oe]),_:1}),se,re,ne,ae,c("button",{onClick:r[0]||(r[0]=i=>t.value=!0),class:"flex"},[l(u(q),{name:"shopping-cart",class:"h-6"}),l(u(U),{variant:"solid"},{default:h(()=>[P(L(u(a).items.length),1)]),_:1})])])])]),l(u(F),{options:{title:"Your Cart",size:"3xl",actions:[{label:"Proceed to Checkout",variant:"solid",onClick:i=>{i(),u(o).push({name:"CheckoutPage"})}}]},modelValue:t.value,"onUpdate:modelValue":r[1]||(r[1]=i=>t.value=i)},{"body-content":h(()=>[c("ul",null,[(_(!0),g(x,null,z(u(a).items,(i,C)=>(_(),g("li",null,[P(" *"+L(C+1)+"-"+L(i.product)+" ",1),l(u(T),{modelValue:i.qty,"onUpdate:modelValue":E=>i.qty=E,type:"number",placeholder:"qty"},null,8,["modelValue","onUpdate:modelValue"]),l(u(R),{onClick:E=>e(C),variant:"outline",theme:"red",class:"mt-2"},{default:h(()=>[P("Remove")]),_:2},1032,["onClick"])]))),256))])]),_:1},8,["options","modelValue"])],64)}}},ie={class:"mt-12"},le={__name:"App",setup(n){const o=I("cart");return B(o.items,()=>{console.log("watch works"),localStorage.setItem("cart",JSON.stringify(o))}),(a,t)=>{const e=S("router-view");return _(),g(x,null,[l(ce,{class:""}),c("div",ie,[l(e)])],64)}}};let m=H(le),O=JSON.parse(localStorage.getItem("cart")||'{"items": []}');localStorage.getItem("cart")||localStorage.setItem("cart",JSON.stringify(O));const ue=w(O);m.provide("cart",ue);J("resourceFetcher",Y);m.use(f);m.use(W);m.component("Button",R);m.component("Card",G);m.component("Input",K);m.mount("#app");export{p as s};
